
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mydomain.org/mysite/">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>My site</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-41-configuracion-de-un-servidor-dns" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="My site" class="md-header__button md-logo" aria-label="My site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My site
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Practica 4.1: Configuración De Un Servidor DNS
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="My site" class="md-nav__button md-logo" aria-label="My site" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    My site
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Practica 4.1: Configuración De Un Servidor DNS
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Practica 4.1: Configuración De Un Servidor DNS
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-del-dns" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación del DNS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracion-del-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración del servidor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuración del servidor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion-de-namedconfoptions" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de named.conf.options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-namedconflocal" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de named.conf.local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-las-zonas-directa-e-inversa" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de las zonas directa e inversa
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobaciones-de-las-configuraciones" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones de las configuraciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobacion-de-la-resolucion-de-nombres-y-consultas" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación de la resolución de nombres y consultas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuestiones-finales" class="md-nav__link">
    <span class="md-ellipsis">
      Cuestiones finales
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instalacion-del-dns" class="md-nav__link">
    <span class="md-ellipsis">
      Instalación del DNS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracion-del-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración del servidor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuración del servidor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuracion-de-namedconfoptions" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de named.conf.options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-namedconflocal" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de named.conf.local
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuracion-de-las-zonas-directa-e-inversa" class="md-nav__link">
    <span class="md-ellipsis">
      Configuración de las zonas directa e inversa
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobaciones-de-las-configuraciones" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobaciones de las configuraciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comprobacion-de-la-resolucion-de-nombres-y-consultas" class="md-nav__link">
    <span class="md-ellipsis">
      Comprobación de la resolución de nombres y consultas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cuestiones-finales" class="md-nav__link">
    <span class="md-ellipsis">
      Cuestiones finales
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="practica-41-configuracion-de-un-servidor-dns">Practica 4.1: Configuración De Un Servidor DNS</h1>
<p>Como siempre lo primero que debemos de hacer conectarnos por ssh a nuestra máquina virtual.</p>
<h2 id="instalacion-del-dns">Instalación del DNS</h2>
<p>Para empezar instalaremos el servidor DNS en nuestra máquina virtual.</p>
<p><img alt="1" src="includes/images/1.png" /></p>
<h2 id="configuracion-del-servidor">Configuración del servidor</h2>
<p>Para ello debemos de modificar el archivo named alojado en la carpeta /etc/default y
nos aseguraremos que tenga la siguiente configuración:</p>
<p><img alt="2" src="includes/images/2.png" /></p>
<p>Después veremos que el archivo /etc/bind/named.conf tenga la siguiente configuración:</p>
<p><img alt="3" src="includes/images/3.png" /></p>
<p>Los tres archivos que aparecen ahí son los que después vamos a configurar.</p>
<h3 id="configuracion-de-namedconfoptions">Configuración de named.conf.options</h3>
<p>Hice una copia de seguridad del archivo por si acaso antes de empezar a modificarlo.</p>
<p><img alt="4" src="includes/images/4.png" /></p>
<p>Ahora debemos de dejar el archivo named.conf.options de esta forma:</p>
<p><img alt="5" src="includes/images/5.png" /></p>
<ul>
<li>
<p>allow-recursion {confiables;}; es para que los clientes puedan hacer consultas recursivas.</p>
</li>
<li>
<p>allow-transfer {none;}; es para que no se puedan hacer transferencias de zona.</p>
</li>
<li>
<p>listen-on port 53 {192.168.136.16;}; es para que el servidor escuche en la dirección IP de la máquina.</p>
</li>
<li>
<p>recursion yes; Permite hacer consultas recursivas.</p>
</li>
<li>
<p>dnssec-validation yes; Habilita la validación de DNSSEC.</p>
</li>
<li>
<p>dnssec-enable yes; está deprecated, de forma que lo comenté ya que al comprobar la configuración me daba error.</p>
</li>
</ul>
<p>Una vez hecho comprobamos la configuración con el comando sudo named-checkconf.</p>
<p><img alt="6" src="includes/images/6.png" /></p>
<p>Dado que no ha salido nada quiere decir que está todo correcto.Por último reiniciamos el servicio con el comando sudo systemctl restart named.</p>
<p><img alt="7" src="includes/images/7.png" /></p>
<h3 id="configuracion-de-namedconflocal">Configuración de named.conf.local</h3>
<p>Debemos de modificar el archivo named.conf.local para que quede de la siguiente forma:</p>
<p><img alt="8" src="includes/images/8.png" /></p>
<h3 id="configuracion-de-las-zonas-directa-e-inversa">Configuración de las zonas directa e inversa</h3>
<p>Primero debemos de crear los archivos de las zonas directa e inversa.</p>
<p><img alt="9" src="includes/images/9.png" /></p>
<p>para la zona directa. Para la zona inversa hay que añadir unas lineas en el archivo /etc/bind/named.conf.local.</p>
<p><img alt="10" src="includes/images/10.png" /></p>
<p>Acto seguido se crea el archivo de la zona inversa.</p>
<p><img alt="11" src="includes/images/11.png" /></p>
<p>comprobamos que la configuración es correcta con el comando sudo named-checkzone.</p>
<p><img alt="12" src="includes/images/12.png" /></p>
<p>Por último reiniciamos el servicio con el comando sudo systemctl restart named.</p>
<h2 id="comprobaciones-de-las-configuraciones">Comprobaciones de las configuraciones</h2>
<p>Antes de nada debemos de configurar la máquina cliente para que pueda hacer consultas al servidor DNS.Para ello
debemos de modificar el archivo /etc/resolv.conf y añadir la dirección IP del servidor DNS.</p>
<p><img alt="13" src="includes/images/13.png" /></p>
<h2 id="comprobacion-de-la-resolucion-de-nombres-y-consultas">Comprobación de la resolución de nombres y consultas</h2>
<p>Ahora debemos de comprobar que la resolución de nombres funciona correctamente usando dig.</p>
<p><img alt="14" src="includes/images/14.png" /></p>
<p>Por último comprobamos mediante nslookup.</p>
<p><img alt="15" src="includes/images/15.png" /></p>
<h2 id="cuestiones-finales">Cuestiones finales</h2>
<ol>
<li>¿Qué pasará si un cliente de una red diferente a la tuya intenta hacer uso de tu DNS de alguna manera, le funcionará?¿Por qué, en qué parte de la configuración puede verse?</li>
</ol>
<p>No funcionará, ya que en la configuración se ha restringido la recursión solo a los clientes confiables con la directiva: allow-recursion {confiables;}; 
Esto significa que solo las direcciones IP definidas en "confiables" podrán realizar consultas recursivas. 
Si un cliente externo intenta resolver un dominio usando este DNS, su petición será rechazada.</p>
<ol>
<li>¿Por qué tenemos que permitir las consultas recursivas en la configuración?</li>
</ol>
<p>Para que los clientes puedan hacer consultas recursivas. Si no se permiten consultas recursivas, el servidor DNS solo responderá a las consultas de las 
zonas que administra y no podrá resolver dominios externos.</p>
<ol>
<li>El servidor DNS que acabáis de montar, ¿es autoritativo?¿Por qué?</li>
</ol>
<p>Sí, es autoritativo porque tiene la información de las zonas directa e inversa que administra y puede responder a las consultas de esas zonas.</p>
<ol>
<li>¿Dónde podemos encontrar la directiva $ORIGIN y para qué sirve?</li>
</ol>
<p>La directiva $ORIGIN se encuentra en los archivos de zona y establece el dominio base para los registros.</p>
<ol>
<li>¿Una zona es idéntico a un dominio?</li>
</ol>
<p>No, un dominio es un subarbol del espacio de nombres de dominio.
Una zona es una parte de un dominio gestionada por un servidor DNS específico.</p>
<ol>
<li>¿Pueden editarse los archivos de zona de un servidor esclavo/secundario?</li>
</ol>
<p>No, los servidores secundarios obtienen los datos de un servidor maestro mediante transferencias de zona.</p>
<ol>
<li>¿Por qué podría querer tener más de un servidor esclavo para una misma zona?</li>
</ol>
<p>Para mejorar la redundancia y la disponibilidad. Si un servidor secundario falla, 
los otros servidores secundarios pueden seguir respondiendo a las consultas.</p>
<ol>
<li>¿Cuántos servidores raíz existen?</li>
</ol>
<p>Hay 13 servidores raíz de la A a la M.</p>
<ol>
<li>¿Qué es una consulta iterativa de referencia?</li>
</ol>
<p>Una consulta iterativa de referencia es una consulta en la que el servidor DNS no responde con la dirección IP del dominio solicitado,
sino que responde con la dirección IP de un servidor DNS que puede proporcionar más información sobre el dominio solicitado.</p>
<ol>
<li>En una resolución inversa, ¿a qué nombre se mapearía la dirección IP 172.16.34.56?</li>
</ol>
<p>56 IN PTR nombre_host.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>