{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Practica 4.1: Configuraci\u00f3n De Un Servidor DNS","text":"<p>Como siempre lo primero que debemos de hacer conectarnos por ssh a nuestra m\u00e1quina virtual.</p>"},{"location":"#instalacion-del-dns","title":"Instalaci\u00f3n del DNS","text":"<p>Para empezar instalaremos el servidor DNS en nuestra m\u00e1quina virtual.</p> <p></p>"},{"location":"#configuracion-del-servidor","title":"Configuraci\u00f3n del servidor","text":"<p>Para ello debemos de modificar el archivo named alojado en la carpeta /etc/default y nos aseguraremos que tenga la siguiente configuraci\u00f3n:</p> <p></p> <p>Despu\u00e9s veremos que el archivo /etc/bind/named.conf tenga la siguiente configuraci\u00f3n:</p> <p></p> <p>Los tres archivos que aparecen ah\u00ed son los que despu\u00e9s vamos a configurar.</p>"},{"location":"#configuracion-de-namedconfoptions","title":"Configuraci\u00f3n de named.conf.options","text":"<p>Hice una copia de seguridad del archivo por si acaso antes de empezar a modificarlo.</p> <p></p> <p>Ahora debemos de dejar el archivo named.conf.options de esta forma:</p> <p></p> <ul> <li> <p>allow-recursion {confiables;}; es para que los clientes puedan hacer consultas recursivas.</p> </li> <li> <p>allow-transfer {none;}; es para que no se puedan hacer transferencias de zona.</p> </li> <li> <p>listen-on port 53 {192.168.136.16;}; es para que el servidor escuche en la direcci\u00f3n IP de la m\u00e1quina.</p> </li> <li> <p>recursion yes; Permite hacer consultas recursivas.</p> </li> <li> <p>dnssec-validation yes; Habilita la validaci\u00f3n de DNSSEC.</p> </li> <li> <p>dnssec-enable yes; est\u00e1 deprecated, de forma que lo coment\u00e9 ya que al comprobar la configuraci\u00f3n me daba error.</p> </li> </ul> <p>Una vez hecho comprobamos la configuraci\u00f3n con el comando sudo named-checkconf.</p> <p></p> <p>Dado que no ha salido nada quiere decir que est\u00e1 todo correcto.Por \u00faltimo reiniciamos el servicio con el comando sudo systemctl restart named.</p> <p></p>"},{"location":"#configuracion-de-namedconflocal","title":"Configuraci\u00f3n de named.conf.local","text":"<p>Debemos de modificar el archivo named.conf.local para que quede de la siguiente forma:</p> <p></p>"},{"location":"#configuracion-de-las-zonas-directa-e-inversa","title":"Configuraci\u00f3n de las zonas directa e inversa","text":"<p>Primero debemos de crear los archivos de las zonas directa e inversa.</p> <p></p> <p>para la zona directa. Para la zona inversa hay que a\u00f1adir unas lineas en el archivo /etc/bind/named.conf.local.</p> <p></p> <p>Acto seguido se crea el archivo de la zona inversa.</p> <p></p> <p>comprobamos que la configuraci\u00f3n es correcta con el comando sudo named-checkzone.</p> <p></p> <p>Por \u00faltimo reiniciamos el servicio con el comando sudo systemctl restart named.</p>"},{"location":"#comprobaciones-de-las-configuraciones","title":"Comprobaciones de las configuraciones","text":"<p>Antes de nada debemos de configurar la m\u00e1quina cliente para que pueda hacer consultas al servidor DNS.Para ello debemos de modificar el archivo /etc/resolv.conf y a\u00f1adir la direcci\u00f3n IP del servidor DNS.</p> <p></p>"},{"location":"#comprobacion-de-la-resolucion-de-nombres-y-consultas","title":"Comprobaci\u00f3n de la resoluci\u00f3n de nombres y consultas","text":"<p>Ahora debemos de comprobar que la resoluci\u00f3n de nombres funciona correctamente usando dig.</p> <p></p> <p>Por \u00faltimo comprobamos mediante nslookup.</p> <p></p>"},{"location":"#cuestiones-finales","title":"Cuestiones finales","text":"<ol> <li>\u00bfQu\u00e9 pasar\u00e1 si un cliente de una red diferente a la tuya intenta hacer uso de tu DNS de alguna manera, le funcionar\u00e1?\u00bfPor qu\u00e9, en qu\u00e9 parte de la configuraci\u00f3n puede verse?</li> </ol> <p>No funcionar\u00e1, ya que en la configuraci\u00f3n se ha restringido la recursi\u00f3n solo a los clientes confiables con la directiva: allow-recursion {confiables;};  Esto significa que solo las direcciones IP definidas en \"confiables\" podr\u00e1n realizar consultas recursivas.  Si un cliente externo intenta resolver un dominio usando este DNS, su petici\u00f3n ser\u00e1 rechazada.</p> <ol> <li>\u00bfPor qu\u00e9 tenemos que permitir las consultas recursivas en la configuraci\u00f3n?</li> </ol> <p>Para que los clientes puedan hacer consultas recursivas. Si no se permiten consultas recursivas, el servidor DNS solo responder\u00e1 a las consultas de las  zonas que administra y no podr\u00e1 resolver dominios externos.</p> <ol> <li>El servidor DNS que acab\u00e1is de montar, \u00bfes autoritativo?\u00bfPor qu\u00e9?</li> </ol> <p>S\u00ed, es autoritativo porque tiene la informaci\u00f3n de las zonas directa e inversa que administra y puede responder a las consultas de esas zonas.</p> <ol> <li>\u00bfD\u00f3nde podemos encontrar la directiva $ORIGIN y para qu\u00e9 sirve?</li> </ol> <p>La directiva $ORIGIN se encuentra en los archivos de zona y establece el dominio base para los registros.</p> <ol> <li>\u00bfUna zona es id\u00e9ntico a un dominio?</li> </ol> <p>No, un dominio es un subarbol del espacio de nombres de dominio. Una zona es una parte de un dominio gestionada por un servidor DNS espec\u00edfico.</p> <ol> <li>\u00bfPueden editarse los archivos de zona de un servidor esclavo/secundario?</li> </ol> <p>No, los servidores secundarios obtienen los datos de un servidor maestro mediante transferencias de zona.</p> <ol> <li>\u00bfPor qu\u00e9 podr\u00eda querer tener m\u00e1s de un servidor esclavo para una misma zona?</li> </ol> <p>Para mejorar la redundancia y la disponibilidad. Si un servidor secundario falla,  los otros servidores secundarios pueden seguir respondiendo a las consultas.</p> <ol> <li>\u00bfCu\u00e1ntos servidores ra\u00edz existen?</li> </ol> <p>Hay 13 servidores ra\u00edz de la A a la M.</p> <ol> <li>\u00bfQu\u00e9 es una consulta iterativa de referencia?</li> </ol> <p>Una consulta iterativa de referencia es una consulta en la que el servidor DNS no responde con la direcci\u00f3n IP del dominio solicitado, sino que responde con la direcci\u00f3n IP de un servidor DNS que puede proporcionar m\u00e1s informaci\u00f3n sobre el dominio solicitado.</p> <ol> <li>En una resoluci\u00f3n inversa, \u00bfa qu\u00e9 nombre se mapear\u00eda la direcci\u00f3n IP 172.16.34.56?</li> </ol> <p>56 IN PTR nombre_host.</p>"}]}